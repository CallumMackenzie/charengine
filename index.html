<html>
	<head>
		<title>CharEngine</title>
		<meta charset="utf-8"/>
	</head>
	<body>
		<canvas id="CharEngine" style="width: 100%; height: 100%;"></canvas>
		<script type="module">
		import init, {start} from "./pkg/charengine.js";
		init().then(() => start());
			// import init, {
			// 		WebGlWindow, GPUShader, WindowCreateArgs, WindowSizeMode, DefaultEventManager, Key,
			// 		WebGlTriGPUBufferVertexV, GlClearMask,
			// 	} from "./pkg/charengine.js";
			// init().then(() => {
			// 	let win = new WebGlWindow(new WindowCreateArgs("CharEngine", 0, 0, WindowSizeMode.Windowed));
			// 	let man = new DefaultEventManager();
			// 	try {
			// 	let shader = GPUShader.fromSources(win,
      //               `#version 300 es
      //               precision highp float;
      //               layout (location = 0) in vec3 aPos;
      //               uniform vec2 pos;
      //               void main() {
      //                   gl_Position = vec4(aPos.xy + pos, 0.0, 1.0);
      //               }
      //               `,
      //               `#version 300 es
      //               precision mediump float;
      //               out vec4 FragColor;
      //               void main() {
      //                   FragColor = vec4(1.0f, 1.0f, 1.0f, 1.0f);
      //               }
      //               `);
			// 	let quad = WebGlTriGPUBufferVertexV.fromFloatArray(win, [-0.5, -0.5, 0.0,
      //                                                          -0.5, 0.5, 0.0,
      //                                                          0.5, 0.5, 0.0,
			//
      //                                                          -0.5, -0.5, 0.0,
      //                                                          0.5, 0.5, 0.0,
      //                                                          0.5, -0.5, 0.0,]);
			// 	win.setClearColour(0.1, 0.1, 0.1, 1);
			// 	let main = () => {
			// 		win.pollEvents();
			// 		man.processEvents(win.getEvents());
			// 		if (man.winSizeChanged()) {
			// 			let sz = man.winSize();
			// 			win.setSize(sz.getX(), sz.getY());
			// 			win.setResolution(sz.getX(), sz.getY());
			// 		}
			// 		if (man.keyPressed(Key.Escape)) {
			// 			end();
			// 			return;
			// 		}
			// 		win.clear(GlClearMask.Color);
      //     shader.use();
			// 		quad.bindVAO();
      //     shader.setVec2f("pos", man.glMousePos());
			// 		shader.draw(quad.nTris());
			// 		requestAnimationFrame(main);
			// 	};
			// 	let end = () => {
			// 		win.destroy();
			// 		console.log("Destroyed");
			// 	};
			// 	main();
			// } catch (e) {
			// 	console.error(e);
			// 	win.destroy();
			// }
			// });
		</script>
	</body>
</html>
